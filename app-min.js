!function(a,b){"use strict";a.module("app",["ngRoute","com.likalo.ui"]).constant("APP_META",{title:"pal-pal",description:"A simple palette management tool.",icon:"logo",maxColors:11}).config(["$routeProvider","$locationProvider",function(a,b){a.when("/:sequence?",{templateUrl:"templates/page.home.html",controller:"HomeCtrl"}).otherwise({redirectTo:"/"}),b.html5Mode(!1)}]),a.module("app").directive("colorPicker",["$colorSerice",function(a){function b(a){return a.h=Math.floor(a.h),a.s=Math.floor(100*a.s),a.v=Math.floor(100*a.v),a}function c(b){return!!a(b).isValid()&&(0===b.indexOf("#")?b:"#"+b)}return{require:"ngModel",scope:{},replace:!0,templateUrl:"templates/directive.colorpicker.html",link:function(d,e,f,g){g.$formatters.push(function(b){return a(b)}),g.$render=function(){var a=g.$viewValue;d.color=a,d.controls={rgb:a.toRgb(),hsv:b(a.toHsv()),hex:a.toHexString(),name:a.toName()}},g.$parsers.push(function(a){return a.toHexString()}),d.colornames=a.names,d.onHexChanged=function(){var e,f;e=c(d.controls.hex),e&&(f=a(e),d.controls.rgb=f.toRgb(),d.controls.hsv=b(f.toHsv()),d.controls.name=f.toName(),g.$setViewValue(f))},d.onRgbChanged=function(){var c=a(d.controls.rgb);d.controls.hsv=b(c.toHsv()),d.controls.hex=c.toHexString(),d.controls.name=c.toName(),g.$setViewValue(c)},d.onHsvChanged=function(){var b=a(d.controls.hsv);d.controls.rgb=b.toRgb(),d.controls.hex=b.toHexString(),d.controls.name=b.toName(),g.$setViewValue(b)}}}}]),a.module("app").factory("$colorSerice",["$window",function(a){return a.tinycolor||{}}]),a.module("app").factory("$exportSerice",["$location","$colorSerice","normalizeColorBitFilter",function(b,c,d){function e(a,b){var c=0;return a.replace(/%s/g,function(){return b[c++]||""})}function f(a){return a.join("-").replace(/#/g,"")}function g(a,b,c){var d=new Blob([a],{type:c});return{filename:b,get:function(){var a=document.createElement("a");a.download=b,a.href=window.URL.createObjectURL(d),a.onclick=function(a){var b=this;setTimeout(function(){window.URL.revokeObjectURL(b.href)},1500)},a.click(),a.remove()}}}function h(a){return b.absUrl().split("#")[0]+"#/"+m}function i(a){var b=a.length,d=48+24*b,f=e(n,[d]);return f+=e(o,[d]),f+=a.map(function(a,b){c(a).toRgb();return e(p,[24+24*b,a])}).join(""),f+=e(q,[h(a)]),f+="</svg>",g(f,m+".svg","image/svg+xml")}function j(a){return""}function k(a){var b="GIMP Palette\nName: pal-pal\nColumns: 3\n";return b+=a.map(function(a){var b=c(a).toRgb();return e("%s %s %s %s",[b.r,b.g,b.b,a])}).join("\n"),g(b,m+".gpl","text/plain")}function l(b){return m=f(b),{string:m,url:h(b),json:a.toJson(b),gimp:k(b),ps:j(b),svg:i(b)}}var m,n='<svg width="%s" height="48" xmlns="http://www.w3.org/2000/svg">',o='<rect width="%s" x="0" y="0" height="48" fill="#fff" />',p='<rect width="24" height="24" x="%s" y="8" fill="%s" />',q='<text x="5" y="44" font-family="sans" font-size="4">%s</text>';return l}]),a.module("app").filter("normalizeColorBit",function(){return function(a,b){return b=b||"000",isNaN(parseFloat(a))||!isFinite(a)?b:("000"+Math.floor(a)).slice(-3)}}).filter("removeSpaces",[function(){return function(b){return a.isString(b)?b.replace(/[\s]/g,""):b}}]).filter("cut",function(){return function(a,b,c,d){if(!a)return"";if(c=parseInt(c,10),!c)return a;if(a.length<=c)return a;if(a=a.substr(0,c),b){var e=a.lastIndexOf(" ");e!=-1&&("."!=a.charAt(e-1)&&","!=a.charAt(e-1)||(e-=1),a=a.substr(0,e))}return a+(d||" â€¦")}}),a.module("app").controller("HomeCtrl",["APP_META","$scope","$colorSerice","$exportSerice","$importSerice","$routeParams","uiDialog",function(a,b,c,d,e,f,g){function h(b,c){c.forEach(function(c){b.length<=a.maxColors&&b.push(c)})}function i(a,b){var d=a&&c(a)||c.random();switch(b){case"analogous":return d.analogous(1).map(function(a){return a.toHexString()});case"tetrad":return d.tetrad().map(function(a){return a.toHexString()});case"triad":default:return d.triad().map(function(a){return a.toHexString()})}}function j(a,b,c){a[b]=a.splice(c,1,a[b])[0]}b.maxColors=a.maxColors,b.palette=e(f.sequence)||i(),b.mostReadable=function(a){return c.mostReadable(a,["#444","#999","#fff"]).toHexString()},b.add=function(){b.palette.length>a.maxColors||b.palette.push(c.random().toHexString())},b.moveLeft=function(a){0!==a&&j(b.palette,a-1,a)},b.moveRight=function(a){a!==b.palette.length-1&&j(b.palette,a+1,a)},b.remove=function(a){b.palette.length<2||b.palette.splice(a,1)},b.generateAnalogous=function(a){b.palette=i(b.palette[a],"analogous")},b.generateTriad=function(a){var c=i(b.palette[a],"triad");isNaN(a)?b.palette=c:h(b.palette,c)},b.generateTetrad=function(a){var c=i(b.palette[a],"tetrad");isNaN(a)?b.palette=c:h(b.palette,c)},b.brightness=function(a){b.palette.forEach(function(d,e){b.palette[e]=a>0?c(d).lighten().toString():c(d).darken().toString()})},b.saturation=function(a){b.palette.forEach(function(d,e){b.palette[e]=a>0?c(d).saturate().toString():c(d).desaturate().toString()})},b.sort=function(){b.palette.sort(function(a,b){var d=c(a).toHsv(),e=c(b).toHsv();return d.h<e.h?-1:d.h>e.h?1:0})},b.getRowLength=function(){return Math.min(b.palette.length,6)},b["export"]=function(){var a=d(b.palette);console.log(a.json),g.modal("templates/modal.export.html",["$scope","data",function(a,b){a.data=b}],{resolve:{data:function(){return a}}})}}]),a.module("app").factory("$importSerice",[function(){function b(b){return a.isDefined(b)&&b.split("-").map(function(a){return"#"+a})}return b}]),a.module("app").controller("PageCtrl",["APP_META","$scope",function(a,b){b.APP_META=a}])}(window.angular);
//# sourceMappingURL=app-min.js.map